import {Component, OnInit, ViewChild} from '@angular/core';
import {InformeTecnicoService} from "../../service/informe-tecnico.service";
import {ActivatedRoute, Router} from "@angular/router";
import {ToastrService} from "ngx-toastr";
import {InformeTecnico} from "../../models/informe-tecnico";
import { jsPDF } from 'jspdf';
import html2canvas from 'html2canvas';

@Component({
  selector: 'app-detalle-informe',
  templateUrl: './detalle-informe.component.html',
  styleUrls: ['./detalle-informe.component.scss']
})
export class DetalleInformeComponent implements OnInit {

  informeTecnico: InformeTecnico;
  tipoServicio: string = '';
  retiroFecha: string = '';
  retiroHora: string = '';
  entregaFecha: string = '';
  entregaHora: string = '';
  detallesActividad: string[] = [];
  observaciones: string[] = [];
  logo: string = 'assets/images/cybertronica.png';
  firma: string = 'data:image/png;base64,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';
  isRendering: boolean = false;

  constructor(
    private informeTecnicoService: InformeTecnicoService,
    private activatedRoute: ActivatedRoute,
    private toastr: ToastrService,
    private router: Router
  ) { }

  ngOnInit(): void {
    const id = this.activatedRoute.snapshot.params.id;
    this.informeTecnicoService.detalleId(id).subscribe(
      data => {
        this.informeTecnico = data;
        switch (data.tipo) {
          case 1:
            this.tipoServicio = 'Preventivo';
            break;
          case 2:
            this.tipoServicio = 'Correctivo';
            break;
          case 3:
            this.tipoServicio = 'Hardware';
            break;
          default:
            this.tipoServicio = 'Erróneo';
            break;
        }
        this.detallesActividad = data.servicioDetalle.split(';');
        this.observaciones = data.observaciones.split(';');
        this.datesToString(data);
      },
      error => {
        this.toastr.error(error.error.mensaje, 'Algo ha fallado', {
          timeOut:3000, positionClass:'toast-top-center'
        });
        this.router.navigate(['/informe']);
      }
    );
  }

  datesToString(informe: InformeTecnico) {
    const fechaRetiro = informe.fechaRetiro.split('T');
    this.retiroFecha = fechaRetiro[0];
    this.retiroHora = fechaRetiro[1].slice(0, 8);
    if(informe.fechaRecibe.length > 5) {
      const fechaRecibe = informe.fechaRecibe.split('T');
      this.entregaFecha = fechaRecibe[0];
      this.entregaHora = fechaRecibe[1].slice(0, 8);
    }
  }

  exportToPDF(): void {
    html2canvas(document.getElementById("toExport")).then(
      canvas => {
        const imgWidth = 208;
        var pageHeight = 295;
        const imgHeight = canvas.height * imgWidth / canvas.width;
        var heightLeft = imgHeight;

        const contentDataURL = canvas.toDataURL('image/png');
        let pdf = new jsPDF('p', 'mm', [imgWidth, imgHeight]);
        var position = 0;
        pdf.addImage(contentDataURL, 'PNG', 0, position, imgWidth, imgHeight + 15);
        // heightLeft -= pageHeight;
        //
        // while (heightLeft >= 0) {
        //   position = heightLeft - imgHeight;
        //   pdf.addPage();
        //   pdf.addImage(contentDataURL, 'PNG', 0, position, imgWidth, imgHeight + 15);
        //   heightLeft -= pageHeight;
        // }
        pdf.save(`inftec-${this.informeTecnico.id}`);
      }
    );
  }

}
